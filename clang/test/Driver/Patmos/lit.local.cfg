import sys
from shutil import which

testing_patmos = config.target_triple.startswith('patmos')

# Only run tests when Patmos is available
config.unsupported = not(testing_patmos)

# Only fail on the last command in a pipe
config.pipefail=False

# Don't look for tests in the mocks and helpers
config.excludes.add('helpers')
config.excludes.add('mock-binaries')
config.excludes.add('mock-includes')
config.excludes.add('mock-std-libs')

if testing_patmos:
    if which("platin") is None:
        print("Patmos WCET analyser 'platin' could not be found.")
        sys.exit(1)